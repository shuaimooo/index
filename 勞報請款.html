<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>技術人員請款單</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f5f7fa;
        }
        
        .invoice-container {
            background-color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            border: 1px solid #e2e8f0;
            padding: 8px;
            text-align: left;
            font-size: 0.9rem;
        }
        
        th {
            background-color: #f8fafc;
            font-weight: 600;
        }
        
        .input-group input {
            transition: border-color 0.2s ease;
        }
        
        .input-group input:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .labor-name, .labor-birth, .labor-id, .labor-phone, .labor-address, .labor-amount {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
        }
        
        .labor-card {
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            background-color: #ffffff;
        }
        
        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #1f2937;
        }
        
        .form-input {
            width: 100%;
            padding: 0.375rem 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            font-size: 0.875rem;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="invoice-content" class="invoice-container max-w-5xl mx-auto p-6 rounded-lg">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-8">
            <div class="mb-4 md:mb-0">
                <h1 class="text-2xl font-bold text-gray-800">LUMASONIX x PROFESSIONAL</h1>
                <p class="text-gray-600">專業技術支援 x 人力媒合行銷</p>
            </div>
            <div class="bg-gray-800 text-white py-2 px-4 rounded">
                <h2 class="text-xl font-bold">技術人員請款單</h2>
            </div>
        </div>

        <!-- Client and Event Information -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- Left Column: Client Info -->
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">廠商名稱</label>
                    <input type="text" placeholder="請輸入廠商名稱" class="w-full h-10 px-3 py-2 border border-gray-300 rounded-md text-base">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">活動地點</label>
                    <input type="text" placeholder="請輸入活動地點" class="w-full h-10 px-3 py-2 border border-gray-300 rounded-md text-base">
                </div>
            </div>

            <!-- Right Column: Time Info -->
            <div class="space-y-4">
                <!-- 進場時間 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">進場時間</label>
                    <div class="flex items-center gap-1">
                        <input type="text" class="w-16 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="4" placeholder="">年
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">月
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">日
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">時
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">分
                    </div>
                </div>

                <!-- 彩排時間 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">彩排時間</label>
                    <div class="flex items-center gap-1">
                        <input type="text" class="w-16 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="4" placeholder="">年
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">月
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">日
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">時
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">分
                    </div>
                </div>

                <!-- 演出時間 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">演出時間</label>
                    <div class="flex items-center gap-1">
                      <input type="text" class="w-16 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="4" placeholder="">年
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">月
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">日
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">時
                        <input type="text" class="w-12 h-10 px-2 py-1 border border-gray-300 rounded text-center" maxlength="2" placeholder="">分
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Support Details -->
        <div class="mb-8">
            <h3 class="section-title">活動支援明細</h3>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-100">
                            <th style="width: 120px; padding: 0 8px;" class="py-2 px-4 text-left">品項</th>
                            <th style="width: 100px; padding: 0 8px;" class="py-2 px-4 text-center">數量</th>
                            <th class="width: 100px; padding: 0 8px;"class="py-2 px-4 text-center">單價 (NT$)</th>
                            <th class="py-2 px-4 text-left">工作內容</th>
                            <th class="py-2 px-4 text-right">小計 (NT$)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">人事支援</td>
                            <td class="py-2 px-4">
                                <input type="number" min="0" class="form-input text-center" id="staff-qty" value="0">
                            </td>
                            <td class="py-2 px-4 text-center">2,500</td>
                            <td class="py-2 px-4">進場、演出、撤場</td>
                            <td class="py-2 px-4 text-right" id="staff-total">0</td>
                        </tr>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">燈/音/視控</td>
                            <td class="py-2 px-4">
                                <input type="number" min="0" class="form-input text-center" id="control-qty" value="0">
                            </td>
                            <td class="py-2 px-4 text-center">1,000</td>
                            <td class="py-2 px-4">演出前一日彩排，將視為一場演出，另行計費。</td>
                            <td class="py-2 px-4 text-right" id="control-total">0</td>
                        </tr>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">追光燈操作</td>
                            <td class="py-2 px-4">
                                <input type="number" min="0" class="form-input text-center" id="spotlight-qty" value="0">
                            </td>
                            <td class="py-2 px-4 text-center">1,000</td>
                            <td class="py-2 px-4">演出前一日彩排，將視為一場演出，另行計費。</td>
                            <td class="py-2 px-4 text-right" id="spotlight-total">0</td>
                        </tr>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">高空作業</td>
                            <td class="py-2 px-4">
                                <input type="number" min="0" class="form-input text-center" id="height-qty" value="0">
                            </td>
                            <td class="py-2 px-4 text-center">1,000</td>
                            <td class="py-2 px-4">作業高度達layher第 6 格以上(約9米)</td>
                            <td class="py-2 px-4 text-right" id="height-total">0</td>
                        </tr>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">加班費用</td>
                            <td class="py-2 px-4">
                                <input type="number" min="0" class="form-input text-center" id="overtime-qty" value="0">
                            </td>
                            <td class="py-2 px-4 text-center">350</td>
                            <td class="py-2 px-4">依實際加班時數計算</td>
                            <td class="py-2 px-4 text-right" id="overtime-total">0</td>
                        </tr>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">行政執行費</td>
                            <td class="py-2 px-4 text-center">一式</td>
                            <td class="py-2 px-4 text-center">10%</td>
                            <td class="py-2 px-4">人事支援 x 10%</td>
                            <td class="py-2 px-4 text-right" id="admin-total">0</td>
                        </tr>
                        <tr class="table-row border-b">
                            <td class="py-2 px-4">其他</td>
                            <td class="py-2 px-4 text-center">一式</td>
                            <td class="py-2 px-4 text-center">
                                <input type="number" min="0" class="form-input text-center" id="other-price" value="0">
                            </td>
                            <td class="py-2 px-4">
                                <input type="text" class="form-input" id="other-desc" placeholder="其他項目描述">
                            </td>
                            <td class="py-2 px-4 text-right" id="other-total">0</td>
                        </tr>
                        <tr class="bg-gray-100">
                            <td colspan="4" class="py-2 px-4 text-right font-bold">未稅金額:</td>
                            <td class="py-2 px-4 text-right font-bold" id="subtotal">NT$0</td>
                        </tr>
                        <tr class="bg-gray-100">
                            <td colspan="4" class="py-2 px-4 text-right font-bold">稅金 (5%):</td>
                            <td class="py-2 px-4 text-right font-bold" id="tax">NT$0</td>
                        </tr>
                        <tr class="bg-gray-100">
                            <td colspan="4" class="py-2 px-4 text-right font-bold">總計金額:</td>
                            <td class="py-2 px-4 text-right font-bold" id="total">NT$0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Labor Reporting Section -->
        <div class="mb-8">
            <h2 class="section-title">勞報資料檢附</h2>
            <div id="labor-cards">
                <div class="labor-card">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-2">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">人員姓名</label>
                            <input type="text" class="labor-name" placeholder="請輸入姓名">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">出生年月日</label>
                            <input type="text" class="labor-birth" placeholder="例：1990/01/01">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">身分證字號</label>
                            <input type="text" class="labor-id" placeholder="請輸入身分證字號">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">連絡電話</label>
                            <input type="text" class="labor-phone" placeholder="請輸入電話">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-6 gap-4">
                        <div class="col-span-1 md:col-span-5">
                            <label class="block text-sm font-medium text-gray-700 mb-1">戶籍地址</label>
                            <input type="text" class="labor-address" placeholder="請輸入完整戶籍地址">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">勞報金額</label>
                            <div class="flex items-center">
                                <input type="number" class="labor-amount" min="0" value="0">
                                <span class="ml-2">元</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="add-labor" class="mt-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">+ 新增人員</button>
        </div>

        <!-- Notes -->
        <div class="mb-8">
            <h2 class="section-title">備註</h2>
            <textarea class="w-full h-32 p-3 border border-gray-300 rounded-md" placeholder="請輸入備註事項..."></textarea>
        </div>

        <!-- Contact Info -->
        <div class="border-t pt-6 mt-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-bold mb-2">聯絡資訊</h3>
                    <p>電話: 02-XXXX-XXXX</p>
                    <p>Email: contact@lumasonix.com</p>
                </div>
                <div class="text-right">
                    <button id="save-invoice" class="px-6 py-3 bg-gray-800 text-white rounded hover:bg-gray-700 transition">儲存報價單</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Fixed prices
            const PRICES = {
                staff: 2500,
                control: 1000,
                spotlight: 1000,
                height: 1000,
                overtime: 350
            };
            
            // Format number as currency
            function formatCurrency(number) {
                return new Intl.NumberFormat('zh-TW', {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                }).format(number);
            }
            
            // Calculate all totals
            function calculateTotals() {
                // Calculate individual line totals
                const staffQty = parseInt(document.getElementById('staff-qty').value) || 0;
                const controlQty = parseInt(document.getElementById('control-qty').value) || 0;
                const spotlightQty = parseInt(document.getElementById('spotlight-qty').value) || 0;
                const heightQty = parseInt(document.getElementById('height-qty').value) || 0;
                const overtimeQty = parseInt(document.getElementById('overtime-qty').value) || 0;
                const otherPrice = parseInt(document.getElementById('other-price').value) || 0;
                
                const staffTotal = staffQty * PRICES.staff;
                const controlTotal = controlQty * PRICES.control;
                const spotlightTotal = spotlightQty * PRICES.spotlight;
                const heightTotal = heightQty * PRICES.height;
                const overtimeTotal = overtimeQty * PRICES.overtime;
                const adminTotal = Math.round(staffTotal * 0.1); // 10% of staff total
                const otherTotal = otherPrice;
                
                // Update line totals in the UI
                document.getElementById('staff-total').textContent = formatCurrency(staffTotal);
                document.getElementById('control-total').textContent = formatCurrency(controlTotal);
                document.getElementById('spotlight-total').textContent = formatCurrency(spotlightTotal);
                document.getElementById('height-total').textContent = formatCurrency(heightTotal);
                document.getElementById('overtime-total').textContent = formatCurrency(overtimeTotal);
                document.getElementById('admin-total').textContent = formatCurrency(adminTotal);
                document.getElementById('other-total').textContent = formatCurrency(otherTotal);
                
                // Calculate subtotal, tax, and total
                const subtotal = staffTotal + controlTotal + spotlightTotal + heightTotal + overtimeTotal + adminTotal + otherTotal;
                const tax = Math.round(subtotal * 0.05); // 5% tax
                const total = subtotal + tax;
                
                // Update totals in the UI
                document.getElementById('subtotal').textContent = 'NT$' + formatCurrency(subtotal);
                document.getElementById('tax').textContent = 'NT$' + formatCurrency(tax);
                document.getElementById('total').textContent = 'NT$' + formatCurrency(total);
                
                return {
                    subtotal,
                    tax,
                    total
                };
            }
            
            // Add event listeners to all quantity inputs
            document.getElementById('staff-qty').addEventListener('input', calculateTotals);
            document.getElementById('control-qty').addEventListener('input', calculateTotals);
            document.getElementById('spotlight-qty').addEventListener('input', calculateTotals);
            document.getElementById('height-qty').addEventListener('input', calculateTotals);
            document.getElementById('overtime-qty').addEventListener('input', calculateTotals);
            document.getElementById('other-price').addEventListener('input', calculateTotals);
            
            // Calculate labor total
            function calculateLaborTotal() {
                let laborTotal = 0;
                document.querySelectorAll('.labor-amount').forEach(input => {
                    laborTotal += parseFloat(input.value) || 0;
                });
                return laborTotal;
            }
            
            // Add new labor personnel button
            document.getElementById('add-labor').addEventListener('click', function() {
                const newLaborCard = document.createElement('div');
                newLaborCard.className = 'labor-card';
                
                newLaborCard.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-medium text-gray-800">人員資料</h3>
                        <button class="remove-labor text-red-500 hover:text-red-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-2">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">人員姓名</label>
                            <input type="text" class="labor-name" placeholder="請輸入姓名">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">出生年月日</label>
                            <input type="text" class="labor-birth" placeholder="例：1990/01/01">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">身分證字號</label>
                            <input type="text" class="labor-id" placeholder="請輸入身分證字號">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">連絡電話</label>
                            <input type="text" class="labor-phone" placeholder="請輸入電話">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-6 gap-4">
                        <div class="col-span-1 md:col-span-5">
                            <label class="block text-sm font-medium text-gray-700 mb-1">戶籍地址</label>
                            <input type="text" class="labor-address" placeholder="請輸入完整戶籍地址">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">勞報金額</label>
                            <div class="flex items-center">
                                <input type="number" class="labor-amount" min="0" value="0">
                                <span class="ml-2">元</span>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('labor-cards').appendChild(newLaborCard);
                
                // Add event listener to remove button
                newLaborCard.querySelector('.remove-labor').addEventListener('click', function() {
                    newLaborCard.remove();
                });
            });
            
            // Save invoice button
            document.getElementById('save-invoice').addEventListener('click', function() {
                const totals = calculateTotals();
                const laborTotal = calculateLaborTotal();
                
                alert(`報價單已儲存！\n未稅金額: NT$${formatCurrency(totals.subtotal)}\n稅金 (5%): NT$${formatCurrency(totals.tax)}\n總計金額: NT$${formatCurrency(totals.total)}\n勞報總金額: NT$${formatCurrency(laborTotal)}`);
            });
            
            // Initialize calculations
            calculateTotals();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9458cb218101f087',t:'MTc0ODIxNTU0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
